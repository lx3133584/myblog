<!DOCTYPE HTML>
<html>
<head>
    <title>利用CSS3制作卡片翻转效果</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="CSS 浮动的16条规则" />
    <meta name="keywords" content="梁旭,博客, 前端, 程序员, 菜鸟, 个人, 作品,CSS3,卡片,翻转,3D" />
    <script src="../js/jquery.min.js"></script>
    <script src="../js/jquery.poptrox.min.js"></script>
    <script src="../js/skel.min.js"></script>
    <script src="init.js"></script>
</head>
<body id="top">

<!-- Header -->
<header id="header">
    <a href="http://www.myliangxu.cn/" class="image avatar"><img src="../img/photo.jpg"/></a>
    <h1>我是 <strong><a href="http://www.myliangxu.cn/">梁旭</a></strong> , 一个前端菜鸟.<br />
        走在学习的路上，把学到的知识写出来<br />
        <strong><a href=".."><i class="fa fa-home"></i> BLOG</a></strong></h1>
</header>

<!-- Main -->
<div id="main">
    <h3><a href=".">CSS</a></h3>

    <!-- One -->
    <section id="one">
        <header class="major">
            <h2>利用CSS3制作卡片翻转效果</h2>
        </header>

        <p>下面是制作3D卡片翻转效果必要的HTML代码结构：</p>
        <div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #f92672">&lt;section</span> <span style="color: #a6e22e">class=</span><span style="color: #e6db74">&quot;container&quot;</span><span style="color: #f92672">&gt;</span>
  <span style="color: #f92672">&lt;div</span> <span style="color: #a6e22e">id=</span><span style="color: #e6db74">&quot;card&quot;</span><span style="color: #f92672">&gt;</span>
    <span style="color: #f92672">&lt;figure</span> <span style="color: #a6e22e">class=</span><span style="color: #e6db74">&quot;front&quot;</span><span style="color: #f92672">&gt;</span>1<span style="color: #f92672">&lt;/figure&gt;</span>
    <span style="color: #f92672">&lt;figure</span> <span style="color: #a6e22e">class=</span><span style="color: #e6db74">&quot;back&quot;</span><span style="color: #f92672">&gt;</span>2<span style="color: #f92672">&lt;/figure&gt;</span>
  <span style="color: #f92672">&lt;/div&gt;</span>
<span style="color: #f92672">&lt;/section&gt;</span>
</pre></div>
        <p>section.container将用于制作3D空间。#card作为3D对象的包装器，它里面两个单独的"figure"元素是卡片的正反两面。虽然是一个是否简单的结构，但是我们强烈建议在使用3D transform时都使用相似的结构模式。保证3D空间和3D对象都建立在一种特定的模式下，既易于查看，也易于添加样式。</p>
        <p>下面要为它们添加样式，首先给3D空间元素.container一个perspective属性。然后随便给它一个大小和一个相对定位方式。</p>
        <div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">.container</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #66d9ef">width</span><span style="color: #f92672">:</span> <span style="color: #ae81ff">200px</span><span style="color: #f8f8f2">;</span>
  <span style="color: #66d9ef">height</span><span style="color: #f92672">:</span> <span style="color: #ae81ff">260px</span><span style="color: #f8f8f2">;</span>
  <span style="color: #66d9ef">position</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">relative</span><span style="color: #f8f8f2">;</span>
  <span style="color: #f8f8f2">perspective</span><span style="color: #f92672">:</span> <span style="color: #ae81ff">800px</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
        <p>现在，#card元素可以在它的父元素里面被转换为3D对象。我们这里使用了相对/绝对的定位方式，所以3D对象会被从文档流中移除。我们还会为3D对象添加width:100%;和height:100%;，这可以确保3D对象的transform-origin出现在容器的中间。</p>
        <p>我们再用CSS3 transition来添加一点过渡效果，以便于更好的观察效果：</p>
        <div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">#card</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #66d9ef">width</span><span style="color: #f92672">:</span> <span style="color: #ae81ff">100</span><span style="color: #f92672">%</span><span style="color: #f8f8f2">;</span>
  <span style="color: #66d9ef">height</span><span style="color: #f92672">:</span> <span style="color: #ae81ff">100</span><span style="color: #f92672">%</span><span style="color: #f8f8f2">;</span>
  <span style="color: #66d9ef">position</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">absolute</span><span style="color: #f8f8f2">;</span>
  <span style="color: #f8f8f2">transform</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">style</span><span style="color: #f92672">:</span> <span style="color: #f8f8f2">preserve</span><span style="color: #ae81ff">-3</span><span style="color: #f8f8f2">d;</span>
  <span style="color: #f8f8f2">transition</span><span style="color: #f92672">:</span> <span style="color: #f8f8f2">transform</span> <span style="color: #ae81ff">1s</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
        <p>.container的perspective效果只对直接后代元素起作用，在这个例子中是#card。为了让#card的后代元素也继承父元素的perspective效果，并且是在同一个3D空间中，可以在#card元素上使用transform-style: preserve-3d属性。如果没有设置3D transform-style，卡片的表面将是扁平的，也不会有卡片的翻转效果。</p>
        <p>为了在3D空间中定位卡片的两个面，我们需要通过2D position: absolute来重置它们的定位。为了隐藏卡片的反面，可以使用backface-visibility: hidden。</p>
        <div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">#card</span> <span style="color: #f92672">figure</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #66d9ef">display</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">block</span><span style="color: #f8f8f2">;</span>
  <span style="color: #66d9ef">position</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">absolute</span><span style="color: #f8f8f2">;</span>
  <span style="color: #66d9ef">width</span><span style="color: #f92672">:</span> <span style="color: #ae81ff">100</span><span style="color: #f92672">%</span><span style="color: #f8f8f2">;</span>
  <span style="color: #66d9ef">height</span><span style="color: #f92672">:</span> <span style="color: #ae81ff">100</span><span style="color: #f92672">%</span><span style="color: #f8f8f2">;</span>
  <span style="color: #f8f8f2">backface</span><span style="color: #f92672">-</span><span style="color: #66d9ef">visibility</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">hidden</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
        <p>为了翻转卡片的反面.back，我们添加了一个基本的3D transform rotateY( 180deg )。</p>
        <div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">#card</span> <span style="color: #a6e22e">.front</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #66d9ef">background</span><span style="color: #f92672">:</span> <span style="color: #f8f8f2">red;</span>
<span style="color: #f8f8f2">}</span>
<span style="color: #a6e22e">#card</span> <span style="color: #a6e22e">.back</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #66d9ef">background</span><span style="color: #f92672">:</span> <span style="color: #f8f8f2">blue;</span>
  <span style="color: #f8f8f2">transform</span><span style="color: #f92672">:</span> <span style="color: #f8f8f2">rotateY(</span> <span style="color: #ae81ff">180</span><span style="color: #f8f8f2">deg</span> <span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
        <p>当卡片翻转后，#card需要一个相应的翻转后的样式。</p>
        <div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">#card.flipped</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">transform</span><span style="color: #f92672">:</span> <span style="color: #f8f8f2">rotateY(</span> <span style="color: #ae81ff">180</span><span style="color: #f8f8f2">deg</span> <span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
        <p>现在我们已经制作好了一个3D卡片，要想翻转卡片，只需要切换它的flipped样式。当卡片应用.flipped class的时候，卡片会翻转180度，这样卡片的背面就翻转到了前面。</p>
        <img src="img/3-1.png" alt="卡片翻转效果">
        <p>如果仔细观察，会发现网上的某些3D翻转效果和我们上边的例子的效果有些不同，它们不是沿中心轴进行翻转的。如果你使用右边为轴进行翻转，你会发现卡片会翻出容器之外。这不仅仅是翻转了卡片，还使卡片的的边从右边移动到了左边，我们可以通过修改DEMO1中的一些代码来使卡片沿右边翻转，而且不会超出容器之外。</p>
        <p>我们要做的是让翻转的中心点位于卡片的右边。默认情况下中心点transform-origin是位于水平和垂直的中间（50 % 50% 或 center center），我们需要改变它：</p>
        <div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">#card</span> <span style="color: #f8f8f2">{</span> <span style="color: #f8f8f2">transform</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">origin</span><span style="color: #f92672">:</span> <span style="color: #66d9ef">right</span> <span style="color: #66d9ef">center</span><span style="color: #f8f8f2">;</span> <span style="color: #f8f8f2">}</span>
</pre></div>
        <p>然后又通过translateX来在水平方向上往回移动一些距离。并且设置它rotateY( -180deg )，这样它就可以正常翻转了。</p>
        <div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #a6e22e">#card.flipped</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #f8f8f2">transform</span><span style="color: #f92672">:</span> <span style="color: #f8f8f2">translateX(</span> <span style="color: #ae81ff">-100</span><span style="color: #f92672">%</span> <span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">rotateY(</span> <span style="color: #ae81ff">-180</span><span style="color: #f8f8f2">deg</span> <span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">}</span>
</pre></div>
    </section>
        <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="0103" data-title="利用CSS3制作卡片翻转效果" data-url="/blog/divcss/3.html"></div>	
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:"myliangxu"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.unstable.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0] 
            || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
    <!-- 多说公共JS代码 end -->
</div>





<!-- Footer -->
<footer id="footer">
    <ul class="icons">
        <li><a target="_blank" href="../img/weixin.png"><i class="icon fa-weixin"></i></a></li>
        <li><a target="_blank" href="http://sighttp.qq.com/authd?IDKEY=ad9f4bb6d491cb8a1a45d2810f1d27c0ae03f775c0281130"><i class="icon fa-qq"></i></a></li>
        <li><a target="_blank" href="http://weibo.com/u/3178976734?refer_flag=1001030101_&is_all=1"><i class="icon fa-weibo"></i></a></li>
        <li><a target="_blank" href="https://github.com/lx3133584"><i class="icon fa-github"></i></a></li>
    </ul>
    <ul class="copyright">
        <li>Copyright © 2016 LiangXu All rights reserved | <a href="http://www.miitbeian.gov.cn/">冀ICP备17002381号</a></li>
    </ul>
</footer>

</body>
</html>